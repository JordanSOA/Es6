<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Classes</title>
  </head>
  <body>
    <script>
      /*
        RAPPEL :
        En JavaScript il est possible de définir sur un objet ce que l'on
        appelle des accesseurs et mutateurs de propriétés (via les méthodes
        `Object.defineProperty()`, `Object.defineProperties()` et
        `Object.create()`).
        L'accès en lecture ou en écriture à ces propriétés provoque un appel
        respectivement à la fonction `get` et à la fonction `set` définies dans
        le descripteur de propriété associé.

        Exemple :
          const obj = {};
          Object.defineProperty(obj, "réponseÀLaQuestionSecrèteDeLUnivers", {
            get: function() {
              console.log("Chut... ne le dites à personne !");
              return 42;
            },
            set: function(nouvelleValeur) {
              console.log("Personne ne change la réponse à la question secrète de l'Univers. Non mais z'êtes pas bien !")
              return;
            },
            enumerable: true,
            configurable: true
          })

        NOUVEAU !
        Les classes ES6 offrent également une syntaxe simplifiée pour définir
        des accesseurs et mutateurs de propriétés sur les instances de la
        classe (avec `get` et `set`).

        Exemple en ES6 :
          ------------------------------------------------------------
          class Point {
            // Constructeur de la classe
            constructor(x, y) {
              this.x = x;
              this.y = y;
            }

            // Accesseur de propriété
            get norme() {
              return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));
            }

            // Mutateur de propriété
            set norme(nouvelleNorme) {
              if (this.norme === 0) {
                return;
              }
              this.x = this.x / this.norme * nouvelleNorme;
              this.y = this.y / this.norme * nouvelleNorme;
            }
          }

          const B = new Point(3, 4);
          B.norme; // 5
          ------------------------------------------------------------

        Code équivalent en ES5 :
          ------------------------------------------------------------
          "use strict";
          var Point = (function () {
            // Constructeur de la classe
            function Point(x, y) {
              this.x = x;
              this.y = y;
            }

            // Accesseur de propriété
            Object.defineProperty(Point.prototype, "norme", {
              get: function() {
                return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));
              },
              set: function(nouvelleNorme) {
                if (this.norme === 0) {
                  return;
                }
                this.x = this.x / this.norme * nouvelleNorme;
                this.y = this.y / this.norme * nouvelleNorme;
              },
              enumerable: true,
              configurable: true
            }):

            return Point;
          }());

          var B = new Point(3, 4);
          B.norme; // 5
          ------------------------------------------------------------
      */

      /*
        Reprenez le code de l'exercice précédent.

        1. Nous allons ajouter à la classe Rectangle des propriétés numériques
        sous forme d'accesseur de propriété pour récupérer les coordonnées des
        segments du rectangle et nous éviter des calculs répétitifs. Appelez ces
        propriétés `haut`, `bas`, `gauche`, `droite`. Le bord gauche se calcule
        en partant du bord droit et en ajoutant la largeur du rectangle, et
        ainsi de suite.

        2. Créez deux rectangles r1 et r2 comme précédemment et affichez dans la
        console les coordonnées de leurs 4 bords.
      */

      class Rectangle {
      constructor(x, y, h, w) {
        this.x = x;
        this.y = y;
        this.h = h;
        this.w = w;
      }

      deplaceA(déplacementX, déplacementY) {
        this.x = déplacementX;
        this.y = déplacementY;
      }

      redimensionner(a, b) {
        this.h = a;
        this.w = b;
      }

      get haut(){
        var bDroit = this.x + this.w;
        return " Côté Droit du Haut (x:"+bDroit+",y:"+this.y+")| Côté Gauche du Haut (x:"+this.x+",y:"+this.y+")";
      }

      get bas(){
        let bBas = this.y + this.h;
        return "Côté Droit du Bas (x:"+(this.x + this.w)+",y:"+bBas+")| Côté Gauche  du Bas (x:"+this.x+",y:"+bBas+")";
      }

      get gauche(){
        return  "Haut du bord Gauche (x:"+this.x+",y:"+this.y+")| Bas du Bord Gauche (x:"+this.x+",y"+(this.y + this.h)+")";
      }

      get droite(){
        return "Haut du bord Droit (x:"+(this.x + this.w)+",y:"+this.y+")| Bas du bord Droit (x:"+(this.x + this.w)+",y:"+(this.y + this.h)+")";
      }
    };

    var r1 = new Rectangle(1, 1, 4, 7);
    var r2 = new Rectangle(-3, 6, 6, 3);
    console.log(r1);
    console.log(r2);
    r1.deplaceA(2, 4);
    r1.redimensionner(5, 10);
    r2.deplaceA(-1, 3);
    r2.redimensionner(4, 20);
    console.log(r1);
    console.log(r2);
    var r1Haut = r1.haut;
    var r1Bas = r1.bas;
    var r1Droite = r1.droite;
    var r1Gauche = r1.gauche;
    var r2Haut = r2.haut;
    var r2Bas = r2.bas;
    var r2Droite = r2.droite;
    var r2Gauche = r2.gauche;
    console.log(r1Haut);
    console.log(r1Bas);
    console.log(r1Gauche);
    console.log(r1.droite);
    console.log(r2Haut);
    console.log(r2Bas);
    console.log(r2Gauche);
    console.log(r2.droite);

    </script>
    <noscript>
      <p>VirtuoWorks® - tous droits réservés©</p>
    </noscript>
  </body>
</html>
